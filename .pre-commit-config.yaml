default_stages: [commit]

default_language_version:
  python: python3.11

repos:
  # Note that all of the `local` repo hooks are version managed by
  # poetry. This is done to ensure that the same versions are used locally
  # as in CI. Update them via poetry when needed.
  - repo: local
    hooks:
      # Ensure poetry installed package versions are up-to-date with lockfile
      - id: poetry-install
        entry: poetry lock --check
        language: system
        name: poetry    - Python package installation
        pass_filenames: false
        types_or: [python, html]

      # Django template formatting - will amend files
      - id: djhtml
        entry: poetry run djhtml
        language: system
        name: djhtml    - Django template formatting
        types: [html]
        files: ./templates/.*\.html$

      # python import sorting - will amend files
      - id: isort
        entry: poetry run isort
        language: system
        name: isort     - Python import sorting
        types: [python]

      # python code formatting - will amend files
      - id: black
        entry: poetry run black
        language: system
        name: black     - Python code formatting
        types: [python]

      # Flake8 includes pyflakes, pycodestyle, mccabe, pydocstyle, bandit
      - id: flake8
        entry: poetry run flake8
        language: system
        name: flake8    - Python style enforcement
        types: [python]

      # python static type checking
      - id: mypy
        entry: poetry run mypy
        language: system
        name: mypy      - Python type checking
        types: [python]
